<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IA ELITE - LUANDA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@900&family=Inter:wght@400;900&display=swap');
        body { background: #000; color: #fff; font-family: 'Inter', sans-serif; }
        .neon-box { border: 1px solid rgba(255,0,0,0.3); box-shadow: 0 0 20px rgba(255,0,0,0.1); }
        .chip { font-size: 10px; padding: 4px; border-radius: 4px; font-weight: 900; width: 48px; text-align: center; }
    </style>
</head>
<body class="p-4 flex flex-col items-center min-h-screen">
    <div class="w-full max-w-md space-y-4">
        <div class="flex justify-between bg-zinc-950 p-4 rounded-2xl border border-zinc-900">
            <div><p class="text-[8px] text-red-600 font-bold">LUANDA</p><p id="clock" class="text-xl font-['Orbitron']">00:00:00</p></div>
            <div class="text-right"><p class="text-[8px] text-zinc-500">BANCA</p><p id="banca" class="text-xl font-bold">Kz 0.00</p></div>
        </div>

        <div class="bg-zinc-950 p-6 rounded-[30px] neon-box text-center">
            <p class="text-[9px] text-zinc-500 font-bold mb-1 uppercase">Entrada Prevista</p>
            <p id="timer" class="text-4xl font-['Orbitron'] text-red-600 mb-4">--:--:--</p>
            
            <div class="grid grid-cols-3 gap-2 border-y border-zinc-900 py-4 mb-4">
                <div><p class="text-[7px] text-zinc-500 uppercase">Assertividade</p><p id="pct" class="text-sm font-bold">0%</p></div>
                <div><p class="text-[7px] text-red-600 uppercase">Alvo Progressivo</p><p id="alvo" class="text-sm font-bold">---</p></div>
                <div><p class="text-[7px] text-zinc-500 uppercase">Tendência</p><p id="tend" class="text-sm font-bold">---</p></div>
            </div>

            <h2 id="status" class="text-xl font-black italic uppercase mb-6 text-zinc-800 tracking-tighter">Aguardando Análise</h2>

            <input type="file" id="file" class="hidden" accept="image/*">
            <button onclick="document.getElementById('file').click()" class="w-full bg-white text-black font-black py-4 rounded-xl mb-3 text-xs uppercase tracking-widest">1. Selecionar Print</button>
            <button onclick="analisar()" class="w-full bg-red-600 font-black py-5 rounded-xl text-xl shadow-lg shadow-red-900/40">2. Gerar Sinal IA</button>
        </div>

        <div id="hist" class="flex flex-wrap gap-2 justify-center bg-zinc-950 p-4 rounded-xl border border-zinc-900"></div>
    </div>

    <script>
        const API = 'https://ia-elite-engine.onrender.com'; // COLOQUE SEU LINK AQUI

        setInterval(() => {
            document.getElementById('clock').innerText = new Date().toLocaleTimeString("pt-PT", {timeZone: "Africa/Luanda"});
        }, 1000);

        async function analisar() {
            const f = document.getElementById('file').files[0];
            if(!f) return alert("Suba o print do Aviator!");
            
            document.getElementById('status').innerText = "CALCULANDO...";
            const fd = new FormData(); fd.append('print', f);

            try {
                const r = await fetch(`${API}/analisar-fluxo`, { method: 'POST', body: fd });
                const d = await r.json();

                document.getElementById('timer').innerText = d.timerRosa;
                document.getElementById('pct').innerText = d.pct;
                document.getElementById('banca').innerText = d.banca;
                document.getElementById('alvo').innerText = d.alvo;
                document.getElementById('status').innerText = d.status;
                document.getElementById('status').style.color = d.cor;
                document.getElementById('tend').innerText = d.tendencia.toUpperCase();

                const h = document.getElementById('hist'); h.innerHTML = '';
                d.historico.forEach(v => {
                    const c = document.createElement('div');
                    c.className = `chip ${v < 2 ? 'bg-blue-700' : v < 10 ? 'bg-purple-700' : 'bg-pink-700'}`;
                    c.innerText = v.toFixed(2)+'x'; h.appendChild(c);
                });
            } catch(e) { alert("O servidor está a acordar, tente em 30 segundos."); }
        }
    </script>
</body>
</html>
