<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IA ELITE PRO - ANGOLA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Inter:wght@400;700;900&display=swap');
        body { background: #050507; color: #fff; font-family: 'Inter', sans-serif; }
        .font-orbitron { font-family: 'Orbitron', sans-serif; }
        .glass { background: rgba(18, 18, 22, 0.95); border: 1px solid rgba(255, 255, 255, 0.05); }
        .neon { border: 1px solid rgba(219, 39, 119, 0.4); box-shadow: 0 0 25px rgba(219, 39, 119, 0.1); }
        .chip { font-size: 10px; padding: 4px 8px; border-radius: 4px; font-weight: 900; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
        .blink { animation: pulse 1.5s infinite; }
    </style>
</head>
<body class="p-4 min-h-screen flex flex-col items-center lg:justify-center">

    <div class="fixed top-4 right-4 flex items-center gap-2 glass px-3 py-1 rounded-full text-[10px]">
        <span>RENDER:</span>
        <div id="led" class="w-2 h-2 rounded-full bg-red-600 blink"></div>
    </div>

    <div class="w-full max-w-md lg:max-w-4xl lg:grid lg:grid-cols-2 lg:gap-6">
        <div class="space-y-4">
            <div class="flex justify-between glass p-5 rounded-2xl">
                <div><p class="text-[9px] text-pink-500 font-bold uppercase">Luanda Time</p><p id="clock" class="text-xl font-orbitron">00:00:00</p></div>
                <div class="text-right"><p class="text-[9px] text-zinc-500 font-bold uppercase">Banca Kz</p><p id="banca" class="text-xl font-bold text-green-500">---</p></div>
            </div>

            <div class="neon bg-zinc-900/90 p-8 rounded-[32px] text-center">
                <div id="status" class="text-[11px] font-black uppercase tracking-widest text-zinc-500 mb-2">IA AGUARDANDO</div>
                <div id="timer" class="text-6xl font-orbitron mb-6">--:--</div>
                <div class="text-left mb-6"><p class="text-[9px] text-zinc-400 font-bold blink">FUSO: ANGOLA (GMT+1)</p></div>
                
                <div class="grid grid-cols-2 gap-4 py-4 border-y border-zinc-800 mb-6">
                    <div class="text-left"><p class="text-[9px] text-zinc-500 uppercase font-bold">Assertividade</p><p id="pct" class="text-2xl font-black text-pink-500">0%</p></div>
                    <div class="text-right"><p class="text-[9px] text-zinc-500 uppercase font-bold">Alvo</p><p id="alvo" class="text-xl font-black italic">---</p></div>
                </div>

                <input type="file" id="file" class="hidden" accept="image/*">
                <button onclick="document.getElementById('file').click()" class="w-full bg-zinc-800 py-4 rounded-xl mb-3 text-[10px] font-bold">1. CARREGAR PRINT</button>
                <button onclick="analisar()" class="w-full bg-pink-600 py-5 rounded-xl text-lg font-black shadow-lg">2. GERAR SINAL</button>
            </div>
        </div>

        <div class="space-y-4 mt-4 lg:mt-0">
            <div class="glass p-6 rounded-2xl text-center">
                <p class="text-[10px] font-bold text-zinc-400 uppercase mb-4">Sinal foi certeiro?</p>
                <div class="grid grid-cols-2 gap-3">
                    <button onclick="feedback('CERTO')" class="border border-green-600 text-green-500 py-3 rounded-xl font-bold text-sm">CERTO ✅</button>
                    <button onclick="feedback('ERRADO')" class="border border-red-600 text-red-500 py-3 rounded-xl font-bold text-sm">ERRADO ❌</button>
                </div>
            </div>
            <div class="glass p-5 rounded-2xl h-full min-h-[150px]">
                <p class="text-[9px] text-zinc-500 font-bold mb-3 uppercase text-center tracking-tighter text-white">Histórico do Gráfico</p>
                <div id="hist" class="flex flex-wrap gap-2 justify-center"></div>
            </div>
        </div>
    </div>

    <script>
        const API = 'https://ia-boot-elite-backend-qs3x.onrender.com';
        
        async function check() {
            try { const r = await fetch(`${API}/ping`); if(r.ok) document.getElementById('led').className='w-2 h-2 rounded-full bg-green-500'; }
            catch(e) { document.getElementById('led').className='w-2 h-2 rounded-full bg-red-600 blink'; }
        }
        setInterval(check, 5000);
        setInterval(() => {
            const opt = { timeZone: 'Africa/Luanda', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
            document.getElementById('clock').innerText = new Intl.DateTimeFormat('pt-PT', opt).format(new Date());
        }, 1000);

        async function analisar() {
            const f = document.getElementById('file').files[0];
            if(!f) return alert("Selecione o print!");
            document.getElementById('status').innerText = "IA ANALISANDO...";
            const fd = new FormData(); fd.append('print', f);
            try {
                const r = await fetch(`${API}/analisar-fluxo`, { method: 'POST', body: fd });
                const d = await r.json();
                document.getElementById('timer').innerText = d.timerRosa;
                document.getElementById('pct').innerText = d.pct;
                document.getElementById('banca').innerText = d.banca;
                document.getElementById('alvo').innerText = d.alvo;
                document.getElementById('status').innerText = d.status;
                document.getElementById('status').style.color = d.cor;
                const h = document.getElementById('hist'); h.innerHTML = '';
                d.historico.forEach(v => {
                    const c = document.createElement('div');
                    c.className = `chip ${v < 2 ? 'bg-blue-600' : (v < 10 ? 'bg-purple-600' : 'bg-pink-600')}`;
                    c.innerText = v.toFixed(2)+'x'; h.appendChild(c);
                });
            } catch(e) { alert("Servidor a iniciar..."); }
        }

        async function feedback(t) {
            await fetch(`${API}/feedback`, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({status:t}) });
            alert("Feedback guardado!");
        }
    </script>
</body>
</html>
